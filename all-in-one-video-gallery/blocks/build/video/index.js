(()=>{var e={942:(e,o)=>{var l;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(e=t(e,a(l)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var o="";for(var l in e)n.call(e,l)&&e[l]&&(o=t(o,l));return o}function t(e,o){return o?e?e+" "+o:e+o:e}e.exports?(i.default=i,e.exports=i):void 0===(l=function(){return i}.apply(o,[]))||(e.exports=l)}()}},o={};function l(n){var i=o[n];if(void 0!==i)return i.exports;var a=o[n]={exports:{}};return e[n](a,a.exports,l),a.exports}l.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return l.d(o,{a:o}),o},l.d=(e,o)=>{for(var n in o)l.o(o,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},l.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{"use strict";const e=window.wp.blocks,o=window.wp.serverSideRender;var n=l.n(o),i=l(942),a=l.n(i);const t=window.wp.blob,r=window.wp.blockEditor,s=window.wp.components,c=window.wp.element,d=window.wp.compose,p=window.wp.data,g=window.wp.primitives,u=window.ReactJSXRuntime,v=(0,u.jsx)(g.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)(g.Path,{d:"M18.7 3H5.3C4 3 3 4 3 5.3v13.4C3 20 4 21 5.3 21h13.4c1.3 0 2.3-1 2.3-2.3V5.3C21 4 20 3 18.7 3zm.8 15.7c0 .4-.4.8-.8.8H5.3c-.4 0-.8-.4-.8-.8V5.3c0-.4.4-.8.8-.8h13.4c.4 0 .8.4.8.8v13.4zM10 15l5-3-5-3v6z"})}),b=window.wp.notices,h=["video"],w=["image"];(0,e.registerBlockType)("aiovg/video",{attributes:{src:{type:"string"},id:{type:"number"},poster:{type:"string"},width:{type:"number",default:aiovg_blocks.video.width},ratio:{type:"number",default:aiovg_blocks.video.ratio},autoplay:{type:"boolean",default:aiovg_blocks.video.autoplay},loop:{type:"boolean",default:aiovg_blocks.video.loop},muted:{type:"boolean",default:aiovg_blocks.video.muted},playpause:{type:"boolean",default:aiovg_blocks.video.playpause},current:{type:"boolean",default:aiovg_blocks.video.current},progress:{type:"boolean",default:aiovg_blocks.video.progress},duration:{type:"boolean",default:aiovg_blocks.video.duration},speed:{type:"boolean",default:aiovg_blocks.video.speed},quality:{type:"boolean",default:aiovg_blocks.video.quality},volume:{type:"boolean",default:aiovg_blocks.video.volume},pip:{type:"boolean",default:aiovg_blocks.video.pip},fullscreen:{type:"boolean",default:aiovg_blocks.video.fullscreen},share:{type:"boolean",default:aiovg_blocks.video.share},embed:{type:"boolean",default:aiovg_blocks.video.embed},download:{type:"boolean",default:aiovg_blocks.video.download}},edit:function e({attributes:o,className:l,setAttributes:i}){const g=(0,d.useInstanceId)(e),k=(0,c.useRef)(),x=(0,c.useRef)(),{src:j,id:y,poster:f,width:_,ratio:m,autoplay:C,loop:R,muted:P,playpause:T,current:S,progress:B,duration:N,speed:U,quality:E,volume:L,pip:M,fullscreen:q,share:I,embed:O,download:V}=o,z=!y&&(0,t.isBlobURL)(j),A=(0,p.useSelect)((e=>e(r.store).getSettings().mediaUpload),[]);function F(e){e&&e.url?i({src:e.url,id:e.id,poster:e.image?.src!==e.icon?e.image?.src:void 0}):i({src:void 0,id:void 0,poster:void 0})}function D(e){e!==j&&i({src:e,id:void 0,poster:void 0})}(0,c.useEffect)((()=>{if(z){const e=(0,t.getBlobByURL)(j);e&&A({filesList:[e],onFileChange:([e])=>F(e),onError:G,allowedTypes:h})}}),[]),(0,c.useEffect)((()=>{k.current&&k.current.load()}),[f]);const{createErrorNotice:H}=(0,p.useDispatch)(b.store);function G(e){H(e,{type:"snackbar"})}const J=a()(l,{"is-transient":z}),X=(0,r.useBlockProps)({className:J});if(!j)return(0,u.jsx)("div",{...X,children:(0,u.jsx)(r.MediaPlaceholder,{icon:(0,u.jsx)(r.BlockIcon,{icon:v}),onSelect:F,onSelectURL:D,accept:"video/*",allowedTypes:h,value:o,onError:G})});const $=`video-block__poster-image-description-${g}`;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r.BlockControls,{children:(0,u.jsx)(r.MediaReplaceFlow,{mediaId:y,mediaURL:j,allowedTypes:h,accept:"video/*",onSelect:F,onSelectURL:D,onError:G})}),(0,u.jsxs)(r.InspectorControls,{children:[(0,u.jsxs)(s.PanelBody,{title:aiovg_blocks.i18n.general_settings,children:[(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.TextControl,{label:aiovg_blocks.i18n.width,help:aiovg_blocks.i18n.width_help,value:_>0?_:"",onChange:e=>i({width:isNaN(e)?0:e})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.TextControl,{label:aiovg_blocks.i18n.ratio,help:aiovg_blocks.i18n.ratio_help,value:m>0?m:"",onChange:e=>i({ratio:isNaN(e)?0:e})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(r.MediaUploadCheck,{children:(0,u.jsxs)(s.BaseControl,{className:"editor-video-poster-control",children:[(0,u.jsx)(s.BaseControl.VisualLabel,{children:aiovg_blocks.i18n.poster_image}),(0,u.jsx)(r.MediaUpload,{title:aiovg_blocks.i18n.select_image,onSelect:function(e){i({poster:e.url})},allowedTypes:w,render:({open:e})=>(0,u.jsx)(s.Button,{variant:"primary",onClick:e,ref:x,"aria-describedby":$,children:f?aiovg_blocks.i18n.replace_image:aiovg_blocks.i18n.select_image})}),(0,u.jsx)("p",{id:$,hidden:!0,children:f?sprintf("The current poster image url is %s",f):"There is no poster image currently selected"}),!!f&&(0,u.jsx)(s.Button,{onClick:function(){i({poster:void 0}),x.current.focus()},variant:"tertiary",children:aiovg_blocks.i18n.remove_image})]})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.autoplay,checked:C,onChange:()=>i({autoplay:!C})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.loop,checked:R,onChange:()=>i({loop:!R})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.muted,checked:P,onChange:()=>i({muted:!P})})})]}),(0,u.jsxs)(s.PanelBody,{title:aiovg_blocks.i18n.player_controls,children:[(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.play_pause,checked:T,onChange:()=>i({playpause:!T})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.current_time,checked:S,onChange:()=>i({current:!S})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.progressbar,checked:B,onChange:()=>i({progress:!B})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.duration,checked:N,onChange:()=>i({duration:!N})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.speed,checked:U,onChange:()=>i({speed:!U})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.quality,checked:E,onChange:()=>i({quality:!E})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.volume,checked:L,onChange:()=>i({volume:!L})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.pip,checked:M,onChange:()=>i({pip:!M})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.fullscreen,checked:q,onChange:()=>i({fullscreen:!q})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.share,checked:I,onChange:()=>i({share:!I})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.embed,checked:O,onChange:()=>i({embed:!O})})}),(0,u.jsx)(s.PanelRow,{children:(0,u.jsx)(s.ToggleControl,{label:aiovg_blocks.i18n.download,checked:V,onChange:()=>i({download:!V})})})]})]}),(0,u.jsxs)("div",{...X,children:[(0,u.jsx)(s.Disabled,{children:(0,u.jsx)(n(),{block:"aiovg/video",attributes:o})}),z&&(0,u.jsx)(s.Spinner,{})]})]})}})})()})();