!function(e){"use strict";var i=e=>new Promise((i,t)=>{if(null!==document.querySelector("#"+e.id))return i(),!1;let o=document.createElement("script");o.id=e.id,o.src=e.src,o.onload=()=>i(),o.onerror=()=>t(),document.body.appendChild(o)}),t={bar:null,timer:null,progress:0,init:function(){this.bar=document.querySelector(".aiovg-filters-progress-bar-inner"),this.progress=0,document.querySelector(".aiovg-filters-progress-bar").style.display="block",this.bar.style.width="0%",this.simulateProgress()},simulateProgress:function(){var e=this;this.timer=setInterval(function(){e.progress+=Math.floor(10*Math.random())+5,e.progress>=90&&(e.progress=90,clearInterval(e.timer)),e.bar.style.width=e.progress+"%"},200)},complete:function(){clearInterval(this.timer),this.progress=100,this.bar.style.width="100%",setTimeout(function(){document.querySelector(".aiovg-filters-progress-bar").style.display="none"},500)}};e(function(){for(var o=aiovg_public.plugin_url,r=aiovg_public.plugin_version,a=[{selector:".aiovg-autocomplete",id:"all-in-one-video-gallery-select-js",src:o+"public/assets/js/select.min.js?ver="+r},{selector:".aiovg-more-ajax",id:"all-in-one-video-gallery-pagination-js",src:o+"public/assets/js/pagination.min.js?ver="+r},{selector:".aiovg-pagination-ajax",id:"all-in-one-video-gallery-pagination-js",src:o+"public/assets/js/pagination.min.js?ver="+r}],n=0;n<a.length;n++){var s=a[n];null!==document.querySelector(s.selector)&&i(s)}e(".aiovg-categories-template-dropdown select").on("change",function(){var i=this.options[this.selectedIndex];0==parseInt(i.value)?window.location.href=e(this).closest(".aiovg-categories-template-dropdown").data("uri"):window.location.href=i.getAttribute("data-uri")}),e(".aiovg-single-video .aiovg-chapter-timestamp").on("click",function(i){i.preventDefault();var t=parseInt(i.currentTarget.dataset.time),o=document.querySelector(".aiovg-single-video .aiovg-player-element");if(null!==o)o.seekTo(t);else{if(null===(o=document.querySelector(".aiovg-single-video iframe")))return!1;o.contentWindow.postMessage({message:"aiovg-video-seek",seconds:t},window.location.origin)}e("html, body").animate({scrollTop:e(".aiovg-single-video").offset().top-parseInt(aiovg_public.scroll_to_top_offset)},500)}),e(".aiovg-search-form-mode-live").each(function(){var i=e(this).find("form"),t=function(){i.submit()};i.find('input[name="vi"]').on("blur",t),i.find('input[type="checkbox"]').on("change",t),i.find("select").on("change",t)}),e(".aiovg-search-form-mode-ajax").each(function(){var i=e(this),o=i.closest(".aiovg-videos-filters-wrapper"),r=i.find("form"),a=o.data("params")||{};a.action="aiovg_load_videos",a.security=aiovg_public.ajax_nonce;var n=function(n){n&&n.preventDefault(),t.init(),i.trigger("aiovg-search-loading");var s=e.extend({},a);r.serializeArray().forEach(function(e){var i=e.name,t=e.value;switch(i){case"vi":s.search_query=t;break;case"sort":var o=t.split("-");s.orderby=o[0]||a.orderby,s.order=o[1]||a.order}});var l=[];r.find('.aiovg-field-category input[type="checkbox"]:checked').each(function(){l.push(e(this).val())}),l.length&&(s.category=l);var c=[];r.find('.aiovg-field-tag input[type="checkbox"]:checked').each(function(){c.push(e(this).val())}),c.length&&(s.tag=c),e.post(aiovg_public.ajax_url,s,function(e){e&&e.data&&e.data.html&&o.find(".aiovg-videos").replaceWith(e.data.html),t.complete(),i.trigger("aiovg-search-complete")}).fail(function(){t.complete(),i.trigger("aiovg-search-failed")})};r.find('input[name="vi"]').on("blur",n),r.find('input[type="checkbox"]').on("change",n),r.find("select").on("change",n),r.on("submit",n)})})}(jQuery);