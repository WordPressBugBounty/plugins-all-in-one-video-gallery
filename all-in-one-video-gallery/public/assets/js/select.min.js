!function(e){"use strict";var t=window.aiovg_select||window.aiovg_public;function i(e=null){document.querySelectorAll(".aiovg-dropdown-terms").forEach(t=>{t!==e&&(t.querySelector(".aiovg-dropdown").style.display="none")})}e(function(){e(".aiovg-dropdown-terms").each(function(){!function t(i){var o=e(i),a=o.find(".aiovg-dropdown-input"),n=o.find(".aiovg-dropdown"),d=o.find(".aiovg-dropdown-list"),r=o.find(".aiovg-dropdown-search"),c=o.find(".aiovg-dropdown-no-items"),l=r.find('input[type="text"]'),s=r.find("button"),v=d.find(".aiovg-dropdown-item").length,u=parseInt(r.data("show_search_threshold"));if(0==v)return!1;v>=u&&r.prop("hidden",!1);var p=function(){var t=[];d.find(".aiovg-item-selected").each(function(){var i=e(this).find(".aiovg-item-name").html().trim();t.push(i)}),a.val(t.join(", "))};a.on("click",function(){n.toggle()}),l.on("input",function(t){o.addClass("aiovg-is-searching"),s.prop("hidden",!1),c.prop("hidden",!0);var i=this.value.trim().toLowerCase(),a=!1;i?d.find(".aiovg-dropdown-item").each(function(){-1===e(this).find(".aiovg-item-name").html().toLowerCase().indexOf(i.toString())?this.hidden=!0:(this.hidden=!1,a=!0)}):d.find(".aiovg-dropdown-item").prop("hidden",!0),a||c.prop("hidden",!1)}),s.on("click",function(e){e.preventDefault(),o.removeClass("aiovg-is-searching"),l.val(""),s.prop("hidden",!0),c.prop("hidden",!0),d.find(".aiovg-dropdown-item").prop("hidden",!1)}),d.find(".aiovg-dropdown-item").on("click",function(t){"input"!==t.target.tagName.toLowerCase()&&e(this).find('input[type="checkbox"]').trigger("click")}),d.find('input[type="checkbox"]').on("change",function(){e(this).is(":checked")?e(this).closest(".aiovg-dropdown-item").addClass("aiovg-item-selected"):e(this).closest(".aiovg-dropdown-item").removeClass("aiovg-item-selected"),p(),n.hide()}),p()}(this)}),document.addEventListener("click",e=>{let t=e.target.closest(".aiovg-dropdown-terms");i(t)}),document.addEventListener("keydown",e=>{27==e.keyCode&&i()}),e(".aiovg-autocomplete").each(function(){var i=e(this).data("uid"),o="ta[]";void 0!==e(this).data("name")&&(o=e(this).data("name"));var a=[];e("option","#aiovg-autocomplete-select-"+i).each(function(){a.push({value:e(this).val(),label:e(this).text()})}),0==a.length&&a.push({value:0,label:t.i18n.no_tags_found});var n,d,r,c,l,s,v,u,p,g,h=function(t,a){if(0!=(t=parseInt(t))){var n=e("#aiovg-autocomplete-tags-"+i);if(0==n.find(".aiovg-tag-item-"+t).length){var d='<span class="aiovg-tag-item aiovg-tag-item-'+t+'">';d+='<a href="javascript:void(0);">',d+='<svg xmlns="http://www.w3.org/2000/svg" fill="none" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="aiovg-flex-shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>',d+=a,d+="</a>",d+='<input type="hidden" name="'+o+'" value="'+t+'" />',d+="</span>",n.append(d)}}};n=i,d=a,r=h,c=document.querySelector("#aiovg-autocomplete-input-"+n),l=document.querySelector("#aiovg-autocomplete-tags-"+n),s=-1,v=function(){var e=[];s=-1,u();var i=document.createElement("div");i.setAttribute("id","aiovg-autocomplete-items-"+n),i.setAttribute("class","aiovg-autocomplete-items"),c.parentNode.appendChild(i),d.forEach((o,a)=>{var n=o.value,s=o.label,v=!1;if(c.value?-1!==s.toLowerCase().indexOf(c.value.toLowerCase())&&(v=!0):v=!0,v||a!=d.length-1||0!=e.length||(n=0,s=t.i18n.no_tags_found,v=!0),v){var p=document.createElement("div");p.innerHTML=s,0==n&&(p.className="aiovg-text-muted"),null!==l.querySelector(".aiovg-tag-item-"+n)&&p.setAttribute("class","aiovg-autocomplete-selected"),p.addEventListener("click",function(){c.value="",r(n,s),u()}),i.appendChild(p),e.push(p)}})},u=function(e=null){var t=0;e&&e.id&&(t=e.id.replace("aiovg-autocomplete-input-","")),document.querySelectorAll(".aiovg-autocomplete-items").forEach(e=>{e.getAttribute("id")!="aiovg-autocomplete-items-"+t&&e.remove()})},p=function(e){g(e),s>=e.length&&(s=0),s<0&&(s=e.length-1),e[s].classList.add("aiovg-autocomplete-active")},g=function(e){e.forEach(e=>{e.classList.remove("aiovg-autocomplete-active")})},c.addEventListener("focus",function(e){""==e.target.value&&v()}),c.addEventListener("input",function(){v()}),c.addEventListener("keydown",function(e){var t=document.querySelector("#aiovg-autocomplete-items-"+n);if(t&&(t=t.querySelectorAll("div")),!t)return!1;40==e.keyCode?(s++,p(t)):38==e.keyCode?(s--,p(t)):13==e.keyCode&&(e.preventDefault(),s>-1&&t[s].click())}),t.hasOwnProperty("autocomplete")||(t.autocomplete=!0,document.addEventListener("click",function(e){u(e.target)}))}),e(document).on("click",".aiovg-tag-item a",function(t){t.preventDefault(),e(this).parent().remove()})})}(jQuery);